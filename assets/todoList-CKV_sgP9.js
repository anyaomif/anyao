import{x as _e,_ as Y,y as S,c as d,d as r,g as t,z as E,n as C,t as h,f as M,p as J,m as G,r as x,q as oe,h as fe,A as ke,j as $e,o as se,a as ye,e as b,w as T,F as q,k as P,T as me,B as De,C as we,D as L,E as Se,G as he,H as Te,I as Ce,i as xe}from"./index-Cu5AWCpx.js";import{A as Ve}from"./AYaoHeader--5oAxUIr.js";import{a as ae}from"./ayModel-ClEDgDaw.js";const ce=_e("todo",{state:()=>({todos:[],filter:"all",categories:[]}),getters:{filteredTodos(e){const s=new Date;s.setHours(0,0,0,0);const a=s.getTime();if(e.categories.includes(e.filter))return e.todos.filter(i=>i.category===e.filter&&!i.completed);switch(this.filter){case"all":return this.todos.filter(i=>!i.completed);case"today":return this.todos.filter(i=>{if(i.completed||!i.dueDate)return!1;const o=new Date(i.dueDate);return o.setHours(0,0,0,0),o.getTime()===a});case"upcoming":return this.todos.filter(i=>{if(i.completed||!i.dueDate)return!1;const o=new Date(i.dueDate);return o.setHours(0,0,0,0),o.getTime()>a});case"past":return this.todos.filter(o=>{if(!o.dueDate)return!1;const n=new Date(o.dueDate);return n.setHours(0,0,0,0),n.getTime()<a}).sort((o,n)=>o.completed-n.completed);case"completed":return this.todos.filter(i=>i.completed);default:return this.todos.filter(i=>!i.completed)}},todayTodos(){const e=new Date;return e.setHours(0,0,0,0),this.todos.filter(s=>{if(!s.dueDate)return!1;const a=new Date(s.dueDate);return a.setHours(0,0,0,0),a.getTime()===e.getTime()})},completedCount(){return this.todos.filter(e=>e.completed).length},totalCount(){return this.todos.length}},actions:{initFromLocalStorage(){const e=localStorage.getItem("todos");e&&(this.todos=JSON.parse(e));const s=localStorage.getItem("categories");s?this.categories=JSON.parse(s):this.categories=["工作","生活","学习","其他"]},saveToLocalStorage(){localStorage.setItem("todos",JSON.stringify(this.todos))},saveCategoriesToLocalStorage(){localStorage.setItem("categories",JSON.stringify(this.categories))},addTodo(e){const s={id:Date.now().toString(),title:e.title,description:e.description,category:e.category,priority:e.priority,dueDate:e.dueDate,completed:!1,createdAt:new Date().toISOString()};this.todos.unshift(s),this.saveToLocalStorage()},updateTodo(e,s){const a=this.todos.findIndex(i=>i.id===e);a!==-1&&(this.todos[a]={...this.todos[a],...s},this.saveToLocalStorage())},removeTodo(e){this.todos=this.todos.filter(s=>s.id!==e),this.saveToLocalStorage()},toggleTodo(e){const s=this.todos.find(a=>a.id===e);s&&(s.completed=!s.completed,this.saveToLocalStorage())},clearCompleted(){this.todos=this.todos.filter(e=>!e.completed),this.saveToLocalStorage()},setFilter(e){this.filter=e},addCategory(e){e&&!this.categories.includes(e)&&(this.categories.push(e),this.saveCategoriesToLocalStorage())},removeCategory(e){this.categories=this.categories.filter(s=>s!==e),this.todos.forEach(s=>{s.category===e&&(s.category=this.categories.length>0?this.categories[0]:"")}),this.saveToLocalStorage(),this.saveCategoriesToLocalStorage()},updateCategory(e,s){const a=this.categories.findIndex(i=>i===e);a!==-1&&s&&!this.categories.includes(s)&&(this.categories[a]=s,this.todos.forEach(i=>{i.category===e&&(i.category=s)}),this.saveToLocalStorage(),this.saveCategoriesToLocalStorage())},reorderTodos(e,s){const a=this.filteredTodos,i=a[e],o=[...a];o.splice(e,1),o.splice(s,0,i);const n=[];[...this.todos].forEach(f=>{if(a.findIndex(m=>m.id===f.id)!==-1){const m=o.findIndex($=>$.id===f.id);n[m]=f}else n.push(f)}),this.todos=n.filter(Boolean),this.saveToLocalStorage()}},persist:!0}),ue=e=>(J("data-v-a0bb9262"),e=e(),G(),e),Ie=ue(()=>t("div",{class:"drag-handle"},[t("i",{class:"fas fa-grip-vertical"})],-1)),Me={class:"todo-main"},Le=["checked","id"],Be=["for"],Fe={class:"todo-text"},ze={key:0,class:"todo-description"},Ee={class:"todo-tags"},Ne={class:"todo-tag category-tag"},Oe=ue(()=>t("i",{class:"fas fa-edit"},null,-1)),He=[Oe],Ye=ue(()=>t("i",{class:"fas fa-trash-alt"},null,-1)),Ue=[Ye],Ae={__name:"TodoItem",props:{todo:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["edit","delete","toggle","drag","view"],setup(e,{emit:s}){const a=e,i=s,o=S(()=>{if(a.todo.completed||!a.todo.dueDate)return!1;const p=new Date;p.setHours(0,0,0,0);const l=new Date(a.todo.dueDate);return l.setHours(0,0,0,0),l.getTime()<p.getTime()}),n=()=>{i("toggle")},y=p=>{p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("text/plain",a.index.toString()),p.target.classList.add("dragging");const l=()=>{p.target.classList.remove("dragging"),document.removeEventListener("dragend",l)};document.addEventListener("dragend",l)},f=S(()=>{switch(a.todo.priority){case"high":return"priority-high";case"medium":return"priority-medium";case"low":return"priority-low";default:return"priority-normal"}}),k=S(()=>{switch(a.todo.priority){case"high":return"高优先级";case"medium":return"中优先级";case"low":return"低优先级";default:return"未设置"}}),m=S(()=>{if(!a.todo.dueDate)return"";const p=new Date(a.todo.dueDate),l=new Date;return l.setHours(0,0,0,0),p<l?"date-overdue":p.getTime()===l.getTime()?"date-today":"date-future"}),$=p=>new Date(p).toLocaleDateString("zh-CN");return(p,l)=>(d(),r("div",{class:C(["todo-item",{completed:e.todo.completed,"is-overdue":o.value}]),draggable:"true",onDragstart:y,onDragover:l[5]||(l[5]=E(()=>{},["prevent"])),onDragenter:l[6]||(l[6]=E(()=>{},["prevent"]))},[Ie,t("div",{class:"todo-content",onClick:l[4]||(l[4]=_=>p.$emit("view",e.todo))},[t("div",Me,[t("div",{class:"checkbox-wrapper",onClick:l[0]||(l[0]=E(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:e.todo.completed,onChange:n,class:"todo-checkbox",id:`todo-${e.todo.id}`},null,40,Le),t("label",{for:`todo-${e.todo.id}`,class:"checkbox-label"},null,8,Be)]),t("div",Fe,[t("h3",{class:C(["todo-title",{"line-through":e.todo.completed}])},h(e.todo.title),3),e.todo.description?(d(),r("p",ze,h(e.todo.description),1)):M("",!0),t("div",Ee,[t("span",{class:C(["todo-tag",f.value])},h(k.value),3),t("span",Ne,h(e.todo.category),1),e.todo.dueDate?(d(),r("span",{key:0,class:C(["todo-tag",m.value])}," 截止: "+h($(e.todo.dueDate)),3)):M("",!0)])])]),t("div",{class:"todo-actions",onClick:l[3]||(l[3]=E(()=>{},["stop"]))},[t("button",{onClick:l[1]||(l[1]=_=>p.$emit("edit")),class:"action-btn edit-btn",title:"编辑"},He),t("button",{onClick:l[2]||(l[2]=_=>p.$emit("delete")),class:"action-btn delete-btn",title:"删除"},Ue)])])],34))}},je=Y(Ae,[["__scopeId","data-v-a0bb9262"]]),Ke={class:"ay-input-container"},qe=["for"],Pe=["id","type","placeholder","disabled","readonly"],Re=["id","placeholder","rows","disabled","readonly"],We={key:1,class:"ay-input-error-text"},Je={__name:"ayInput",props:{modelValue:{type:[String,Number],default:""},label:{type:String,default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},error:{type:String,default:""},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rows:{type:Number,default:3},id:{type:String,default:()=>`ay-input-${Math.random().toString(36).substr(2,9)}`}},emits:["update:modelValue","input","change","focus","blur"],setup(e,{emit:s}){const a=e,i=s,o=x(a.modelValue);oe(()=>a.modelValue,m=>{o.value=m});const n=m=>{i("update:modelValue",o.value),i("input",m)},y=m=>{i("change",m)},f=m=>{i("focus",m)},k=m=>{i("blur",m)};return(m,$)=>(d(),r("div",Ke,[e.label?(d(),r("label",{key:0,for:e.id,class:"ay-input-label"},h(e.label),9,qe)):M("",!0),t("div",{class:C(["ay-input-wrapper",{"ay-input-error":e.error}])},[e.type!=="textarea"?fe((d(),r("input",{key:0,id:e.id,type:e.type,"onUpdate:modelValue":$[0]||($[0]=p=>o.value=p),class:"ay-input",placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,onInput:n,onChange:y,onFocus:f,onBlur:k},null,40,Pe)),[[ke,o.value]]):fe((d(),r("textarea",{key:1,id:e.id,"onUpdate:modelValue":$[1]||($[1]=p=>o.value=p),class:"ay-textarea",placeholder:e.placeholder,rows:e.rows,disabled:e.disabled,readonly:e.readonly,onInput:n,onChange:y,onFocus:f,onBlur:k},null,40,Re)),[[$e,o.value]])],2),e.error?(d(),r("div",We,h(e.error),1)):M("",!0)]))}},re=Y(Je,[["__scopeId","data-v-3224565b"]]),Ge={class:"ay-select-container"},Qe=["for"],Xe={class:"ay-selected-value"},Ze={key:0},et={key:1,class:"ay-placeholder"},tt={class:"ay-select-icon"},at={key:0,class:"ay-select-dropdown"},ot=["onClick"],st={key:1,class:"ay-select-error-text"},lt={__name:"aySelect",props:{modelValue:{type:[String,Number,Object],default:""},options:{type:Array,required:!0},label:{type:String,default:""},placeholder:{type:String,default:"请选择"},valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"},error:{type:String,default:""},id:{type:String,default:()=>`ay-select-${Math.random().toString(36).substr(2,9)}`}},emits:["update:modelValue","change"],setup(e,{emit:s}){const a=e,i=s,o=x(a.modelValue),n=x(!1),y=x(null);oe(()=>a.modelValue,l=>{o.value=l});const f=S(()=>{if(!o.value)return"";const l=a.options.find(_=>typeof _=="object"?_[a.valueKey]===o.value:_===o.value);return l?typeof l=="object"?l[a.labelKey]:l:""}),k=()=>{n.value=!n.value},m=l=>typeof l=="object"?l[a.valueKey]===o.value:l===o.value,$=l=>{const _=typeof l=="object"?l[a.valueKey]:l;o.value=_,i("update:modelValue",_),i("change",_),n.value=!1},p=l=>{y.value&&!y.value.contains(l.target)&&(n.value=!1)};return se(()=>{document.addEventListener("click",p)}),ye(()=>{document.removeEventListener("click",p)}),(l,_)=>(d(),r("div",Ge,[e.label?(d(),r("label",{key:0,for:e.id,class:"ay-select-label"},h(e.label),9,Qe)):M("",!0),t("div",{class:C(["ay-select-wrapper",{"ay-select-error":e.error,"ay-select-open":n.value}]),onClick:k,ref_key:"selectRef",ref:y},[t("div",Xe,[f.value?(d(),r("span",Ze,h(f.value),1)):(d(),r("span",et,h(e.placeholder),1))]),t("div",tt,[t("i",{class:C(["fas",n.value?"fa-chevron-up":"fa-chevron-down"])},null,2)]),b(me,{name:"ay-dropdown"},{default:T(()=>[n.value?(d(),r("div",at,[(d(!0),r(q,null,P(e.options,w=>(d(),r("div",{key:typeof w=="object"?w[e.valueKey]:w,class:C(["ay-select-option",{"ay-select-option-selected":m(w)}]),onClick:E(H=>$(w),["stop"])},h(typeof w=="object"?w[e.labelKey]:w),11,ot))),128))])):M("",!0)]),_:1})],2),e.error?(d(),r("div",st,h(e.error),1)):M("",!0)]))}},pe=Y(lt,[["__scopeId","data-v-ecd9d955"]]),ve=e=>(J("data-v-cbb2c899"),e=e(),G(),e),nt={class:"ay-date-picker-container"},it=["for"],dt={class:"ay-selected-date"},rt={key:0},ct={key:1,class:"ay-placeholder"},ut=ve(()=>t("div",{class:"ay-date-icon"},[t("i",{class:"fas fa-calendar-alt"})],-1)),vt={class:"ay-calendar-header"},ft=ve(()=>t("i",{class:"fas fa-chevron-left"},null,-1)),ht=[ft],pt={class:"ay-calendar-title"},yt=ve(()=>t("i",{class:"fas fa-chevron-right"},null,-1)),mt=[yt],gt={class:"ay-calendar-weekdays"},bt={class:"ay-calendar-days"},_t=["onClick"],kt={class:"ay-calendar-footer"},$t={key:1,class:"ay-date-error-text"},Dt={__name:"ayDatePicker",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:"选择日期"},error:{type:String,default:""},min:{type:String,default:""},max:{type:String,default:""},id:{type:String,default:()=>`ay-date-${Math.random().toString(36).substr(2,9)}`},direction:{type:String,default:"auto",validator:e=>["auto","top","bottom"].includes(e)}},emits:["update:modelValue","change"],setup(e,{emit:s}){const a=e,i=s,o=x(a.modelValue?new Date(a.modelValue):null),n=x(!1),y=x(null),f=x(o.value?o.value.getMonth():new Date().getMonth()),k=x(o.value?o.value.getFullYear():new Date().getFullYear()),m=x(a.direction==="top"?"top":"bottom"),$=["日","一","二","三","四","五","六"];oe(()=>a.modelValue,c=>{o.value=c?new Date(c):null,o.value&&(f.value=o.value.getMonth(),k.value=o.value.getFullYear())}),oe(()=>a.direction,c=>{c!=="auto"?m.value=c:U()});const p=S(()=>{if(!o.value)return"";const c=o.value.getFullYear(),B=String(o.value.getMonth()+1).padStart(2,"0"),V=String(o.value.getDate()).padStart(2,"0");return`${c}-${B}-${V}`}),l=S(()=>["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][f.value]),_=S(()=>{const c=[],B=new Date(k.value,f.value,1),V=new Date(k.value,f.value+1,0),N=B.getDay();if(N>0){const I=new Date(k.value,f.value,0).getDate();for(let F=N-1;F>=0;F--){const ee=I-F,j=new Date(k.value,f.value-1,ee);c.push({day:ee,date:j,inMonth:!1,isToday:w(j),isSelected:H(j)})}}for(let I=1;I<=V.getDate();I++){const F=new Date(k.value,f.value,I);c.push({day:I,date:F,inMonth:!0,isToday:w(F),isSelected:H(F)})}const A=V.getDay();if(A<6)for(let I=1;I<=6-A;I++){const F=new Date(k.value,f.value+1,I);c.push({day:I,date:F,inMonth:!1,isToday:w(F),isSelected:H(F)})}return c}),w=c=>{const B=new Date;return c.getDate()===B.getDate()&&c.getMonth()===B.getMonth()&&c.getFullYear()===B.getFullYear()},H=c=>o.value?c.getDate()===o.value.getDate()&&c.getMonth()===o.value.getMonth()&&c.getFullYear()===o.value.getFullYear():!1,U=()=>{!y.value||a.direction!=="auto"||De(()=>{const c=y.value.getBoundingClientRect(),B=380,N=window.innerHeight-c.bottom,A=c.top;N<B&&A>N?m.value="top":m.value="bottom"})},le=()=>{n.value=!n.value,n.value&&a.direction==="auto"&&U()},Q=()=>{f.value===0?(f.value=11,k.value--):f.value--},X=()=>{f.value===11?(f.value=0,k.value++):f.value++},ne=c=>{if(!c.inMonth){c.date<new Date(k.value,f.value,1)?Q():X();return}o.value=c.date,W(),n.value=!1},R=()=>{const c=new Date;f.value=c.getMonth(),k.value=c.getFullYear(),o.value=c,W(),n.value=!1},ie=()=>{o.value=null,W(),n.value=!1},W=()=>{const c=o.value?de(o.value):"";i("update:modelValue",c),i("change",c)},de=c=>{const B=c.getFullYear(),V=String(c.getMonth()+1).padStart(2,"0"),N=String(c.getDate()).padStart(2,"0");return`${B}-${V}-${N}`},Z=c=>{y.value&&!y.value.contains(c.target)&&(n.value=!1)};return se(()=>{document.addEventListener("click",Z),a.direction==="auto"?U():m.value=a.direction,window.addEventListener("resize",U)}),ye(()=>{document.removeEventListener("click",Z),window.removeEventListener("resize",U)}),(c,B)=>(d(),r("div",nt,[e.label?(d(),r("label",{key:0,for:e.id,class:"ay-date-label"},h(e.label),9,it)):M("",!0),t("div",{class:C(["ay-date-wrapper",{"ay-date-error":e.error,"ay-date-open":n.value}]),onClick:le,ref_key:"datePickerRef",ref:y},[t("div",dt,[p.value?(d(),r("span",rt,h(p.value),1)):(d(),r("span",ct,h(e.placeholder),1))]),ut,b(me,{name:"ay-dropdown"},{default:T(()=>[n.value?(d(),r("div",{key:0,class:C(["ay-calendar",{"ay-calendar-top":m.value==="top"}])},[t("div",vt,[t("button",{type:"button",class:"ay-calendar-nav",onClick:E(Q,["stop"])},ht),t("div",pt,h(l.value)+" "+h(k.value),1),t("button",{type:"button",class:"ay-calendar-nav",onClick:E(X,["stop"])},mt)]),t("div",gt,[(d(),r(q,null,P($,V=>t("div",{key:V,class:"ay-calendar-weekday"},h(V),1)),64))]),t("div",bt,[(d(!0),r(q,null,P(_.value,(V,N)=>(d(),r("div",{key:N,class:C(["ay-calendar-day",{"ay-calendar-day-disabled":!V.inMonth,"ay-calendar-day-today":V.isToday,"ay-calendar-day-selected":V.isSelected}]),onClick:E(A=>ne(V),["stop"])},h(V.day),11,_t))),128))]),t("div",kt,[t("button",{type:"button",class:"ay-calendar-btn",onClick:E(ie,["stop"])}," 清空 "),t("button",{type:"button",class:"ay-calendar-btn ay-calendar-btn-today",onClick:E(R,["stop"])}," 今天 ")])],2)):M("",!0)]),_:1})],2),e.error?(d(),r("div",$t,h(e.error),1)):M("",!0)]))}},wt=Y(Dt,[["__scopeId","data-v-cbb2c899"]]),St=["type","disabled"],Tt={__name:"ayButton",props:{type:{type:String,default:"primary",validator:e=>["primary","success","warning","danger","info","default"].includes(e)},size:{type:String,default:"",validator:e=>["large","small","mini",""].includes(e)},icon:{type:String,default:""},nativeType:{type:String,default:"button",validator:e=>["button","submit","reset"].includes(e)},disabled:{type:Boolean,default:!1},block:{type:Boolean,default:!1},round:{type:Boolean,default:!1},text:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:s}){const a=e,i=s,o=n=>{a.disabled||i("click",n)};return(n,y)=>(d(),r("button",{type:e.nativeType,class:C(["ay-button",[`ay-button-${e.type}`,{"ay-button-disabled":e.disabled,"ay-button-block":e.block,"ay-button-round":e.round,"ay-button-text":e.text,[`ay-button-${e.size}`]:e.size}]]),disabled:e.disabled,onClick:o},[e.icon?(d(),r("i",{key:0,class:C(["ay-button-icon",e.icon])},null,2)):M("",!0),n.$slots.default?(d(),r("span",{key:1,class:C({"ml-2":e.icon})},[we(n.$slots,"default",{},void 0)],2)):M("",!0)],10,St))}},z=Y(Tt,[["__scopeId","data-v-8f3dd996"]]),Ct={class:"todo-form"},xt={class:"form-title"},Vt={class:"form-item"},It={class:"form-item"},Mt={class:"form-row"},Lt={class:"form-item form-item-half"},Bt={class:"form-item form-item-half"},Ft={class:"form-item"},zt={key:0,class:"form-actions"},Et={__name:"TodoForm",props:{todo:{type:Object,default:null},hideActions:{type:Boolean,default:!1}},emits:["cancel","add","update"],setup(e,{emit:s}){const a=e,i=s,o=ce(),n=x({title:"",description:"",category:"工作",priority:"medium",dueDate:""}),y=S(()=>!!a.todo),f=S(()=>o.categories),k=[{value:"high",label:"高优先级"},{value:"medium",label:"中优先级"},{value:"low",label:"低优先级"}];se(()=>{a.todo?n.value={title:a.todo.title,description:a.todo.description||"",category:a.todo.category,priority:a.todo.priority,dueDate:a.todo.dueDate?new Date(a.todo.dueDate).toISOString().slice(0,10):""}:n.value.dueDate=new Date().toISOString().slice(0,10)});const m=()=>{const p={...n.value};y.value?i("update",p):(i("add",p),$())},$=()=>{n.value={title:"",description:"",category:"工作",priority:"medium",dueDate:""}};return(p,l)=>(d(),r("div",Ct,[t("h2",xt,h(y.value?"编辑待办":"添加待办"),1),t("form",{onSubmit:E(m,["prevent"]),id:"todo-form",class:"todo-form-content"},[t("div",Vt,[b(re,{modelValue:n.value.title,"onUpdate:modelValue":l[0]||(l[0]=_=>n.value.title=_),label:"标题",placeholder:"输入待办事项标题...",required:""},null,8,["modelValue"])]),t("div",It,[b(re,{modelValue:n.value.description,"onUpdate:modelValue":l[1]||(l[1]=_=>n.value.description=_),label:"描述（可选）",type:"textarea",placeholder:"输入详细描述...",rows:3},null,8,["modelValue"])]),t("div",Mt,[t("div",Lt,[b(pe,{modelValue:n.value.category,"onUpdate:modelValue":l[2]||(l[2]=_=>n.value.category=_),label:"分类",options:f.value},null,8,["modelValue","options"])]),t("div",Bt,[b(pe,{modelValue:n.value.priority,"onUpdate:modelValue":l[3]||(l[3]=_=>n.value.priority=_),label:"优先级",options:k},null,8,["modelValue"])])]),t("div",Ft,[b(wt,{modelValue:n.value.dueDate,"onUpdate:modelValue":l[4]||(l[4]=_=>n.value.dueDate=_),label:"截止日期（可选）",direction:"top"},null,8,["modelValue"])]),e.hideActions?M("",!0):(d(),r("div",zt,[b(z,{type:"default",onClick:l[5]||(l[5]=_=>p.$emit("cancel"))},{default:T(()=>[L(" 取消 ")]),_:1}),b(z,{type:"primary","native-type":"submit"},{default:T(()=>[L(h(y.value?"更新":"添加"),1)]),_:1})]))],32)]))}},Nt=Y(Et,[["__scopeId","data-v-db9a01d1"]]),ge=e=>(J("data-v-dad95f13"),e=e(),G(),e),Ot={class:"empty-state"},Ht=ge(()=>t("div",{class:"icon-container"},[t("i",{class:"fas fa-clipboard-list"})],-1)),Yt=ge(()=>t("h3",{class:"empty-title"},"暂无待办事项",-1)),Ut={class:"empty-message"},At={__name:"TodoEmpty",props:{filter:{type:String,default:"all"}},emits:["add-new"],setup(e,{emit:s}){const a=ce(),i=e,o=S(()=>{if(a.totalCount===0)return"添加你的第一个待办事项，开始高效管理你的一天！";switch(i.filter){case"active":return"太棒了！你已经完成了所有待办事项！";case"completed":return"暂无已完成的待办事项，继续加油！";default:return"添加你的第一个待办事项，开始高效管理你的一天！"}});return(n,y)=>(d(),r("div",Ot,[Ht,Yt,t("p",Ut,h(o.value),1),b(z,{onClick:y[0]||(y[0]=f=>n.$emit("add-new")),type:"primary",icon:"fas fa-plus"},{default:T(()=>[L(" 添加新待办 ")]),_:1})]))}},jt=Y(At,[["__scopeId","data-v-dad95f13"]]),Kt=e=>(J("data-v-5359ce69"),e=e(),G(),e),qt=["width","height","viewBox"],Pt=["cx","cy","r","stroke-width"],Rt=["cx","cy","r","stroke-width","stroke-dasharray","stroke-dashoffset"],Wt={class:"progress-text"},Jt={class:"percentage-value"},Gt=Kt(()=>t("span",{class:"percentage-sign"},"%",-1)),Qt={__name:"CircularProgressBar",props:{percentage:{type:Number,required:!0,default:0},size:{type:Number,default:120},strokeWidth:{type:Number,default:10}},setup(e){const s=e,a=S(()=>s.size/2),i=S(()=>a.value-s.strokeWidth/2),o=S(()=>2*Math.PI*i.value),n=S(()=>{const y=Math.max(0,Math.min(100,s.percentage));return o.value*(1-y/100)});return(y,f)=>(d(),r("div",{class:"circular-progress",style:Se({width:`${e.size}px`,height:`${e.size}px`})},[(d(),r("svg",{width:e.size,height:e.size,viewBox:`0 0 ${e.size} ${e.size}`},[t("circle",{cx:a.value,cy:a.value,r:i.value,"stroke-width":e.strokeWidth,class:"progress-background"},null,8,Pt),t("circle",{cx:a.value,cy:a.value,r:i.value,"stroke-width":e.strokeWidth,"stroke-dasharray":o.value,"stroke-dashoffset":n.value,class:"progress-bar"},null,8,Rt)],8,qt)),t("div",Wt,[t("span",Jt,h(Math.round(e.percentage)),1),Gt])],4))}},Xt=Y(Qt,[["__scopeId","data-v-5359ce69"]]),D=e=>(J("data-v-0fa67b1a"),e=e(),G(),e),Zt=D(()=>t("i",{class:"fas fa-bars"},null,-1)),ea={class:"todo-sidebar-left"},ta={class:"sidebar-nav"},aa={class:"nav-list"},oa=D(()=>t("i",{class:"fas fa-inbox"},null,-1)),sa=D(()=>t("span",null,"全部",-1)),la=[oa,sa],na=D(()=>t("i",{class:"fas fa-calendar-day"},null,-1)),ia=D(()=>t("span",null,"今日",-1)),da=[na,ia],ra=D(()=>t("i",{class:"fas fa-calendar-alt"},null,-1)),ca=D(()=>t("span",null,"未来",-1)),ua=[ra,ca],va=D(()=>t("i",{class:"fas fa-history"},null,-1)),fa=D(()=>t("span",null,"往期",-1)),ha=[va,fa],pa=D(()=>t("i",{class:"fas fa-check-circle"},null,-1)),ya=D(()=>t("span",null,"已完成",-1)),ma=[pa,ya],ga={class:"sidebar-nav"},ba={class:"nav-title-wrapper"},_a=D(()=>t("h3",{class:"nav-title"},"我的分类",-1)),ka={class:"nav-list"},$a={key:0,class:"nav-item-empty"},Da=D(()=>t("i",{class:"fas fa-cog"},null,-1)),wa=["onClick"],Sa=D(()=>t("i",{class:"fas fa-folder"},null,-1)),Ta={class:"todo-main-content"},Ca=Ce('<div class="subtitle-container" data-v-0fa67b1a><h1 class="main-title" data-v-0fa67b1a>今日事，今日毕</h1><h2 class="subtitle" data-v-0fa67b1a>立一日之志，毕一日之功</h2><div class="subtitle-decoration" data-v-0fa67b1a><span class="decoration-line" data-v-0fa67b1a></span><span class="decoration-dot" data-v-0fa67b1a></span><span class="decoration-line" data-v-0fa67b1a></span></div></div>',1),xa={class:"content-title"},Va={key:2,class:"clear-completed"},Ia={class:"todo-sidebar-right"},Ma={class:"sidebar-card stats-card"},La=D(()=>t("h2",{class:"sidebar-title"},"做多少了？",-1)),Ba={class:"progress-chart-container"},Fa={class:"stats-list"},za={class:"stat-item"},Ea=D(()=>t("span",{class:"stat-label"},[t("span",{class:"dot total"}),L("总计")],-1)),Na={class:"stat-value"},Oa={class:"stat-item"},Ha=D(()=>t("span",{class:"stat-label"},[t("span",{class:"dot completed"}),L("已完成")],-1)),Ya={class:"stat-value completed"},Ua={class:"stat-item"},Aa=D(()=>t("span",{class:"stat-label"},[t("span",{class:"dot active"}),L("未完成")],-1)),ja={class:"stat-value active"},Ka={class:"form-actions"},qa={class:"category-manager"},Pa={class:"add-category-form"},Ra={class:"input-wrapper"},Wa={class:"category-list-wrapper"},Ja={key:0,class:"category-list"},Ga={key:1,class:"empty-categories"},Qa=D(()=>t("p",null,"还没有任何分类，快添加一个吧！",-1)),Xa=[Qa],Za=D(()=>t("p",null,"您确定要删除这个待办事项吗？此操作无法撤销。",-1)),eo={key:0,class:"todo-detail-view"},to={class:"detail-item"},ao=D(()=>t("span",{class:"detail-label"},"描述:",-1)),oo={class:"detail-value description"},so={class:"detail-item"},lo=D(()=>t("span",{class:"detail-label"},"分类:",-1)),no={class:"detail-value"},io={class:"detail-item"},ro=D(()=>t("span",{class:"detail-label"},"优先级:",-1)),co={class:"detail-value"},uo={class:"detail-item"},vo=D(()=>t("span",{class:"detail-label"},"截止日期:",-1)),fo={class:"detail-value"},ho={class:"detail-item"},po=D(()=>t("span",{class:"detail-label"},"状态:",-1)),yo={class:"detail-item"},mo=D(()=>t("span",{class:"detail-label"},"创建时间:",-1)),go={class:"detail-value"},bo={__name:"todoList",setup(e){const s=ce(),a=x(!1),i=x(null),o=x(!1),n=x(""),y=x(!1),f=x(null),k=x(!1),m=x(!1),$=x(null);se(()=>{s.initFromLocalStorage()});const p=S(()=>s.filteredTodos);S(()=>s.todayTodos);const l=S(()=>s.completedCount),_=S(()=>s.totalCount),w=S(()=>s.filter),H=S(()=>s.categories),U=S(()=>_.value===0?0:Math.round(l.value/_.value*100)),le=S(()=>({all:"全部",today:"今日",upcoming:"未来计划",past:"往期",completed:"已完成"})[w.value]||w.value),Q=g=>{s.addTodo(g),a.value=!1},X=g=>{i.value=g,a.value=!0},ne=g=>{i.value&&(s.updateTodo(i.value.id,g),R())},R=()=>{i.value=null,a.value=!1},ie=g=>{s.toggleTodo(g)},W=g=>{f.value=g,y.value=!0},de=()=>{f.value&&s.removeTodo(f.value),y.value=!1,f.value=null},Z=()=>{s.clearCompleted()},c=()=>{n.value.trim()&&(s.addCategory(n.value.trim()),n.value="")},B=g=>{s.removeCategory(g)},V=g=>{const u=parseInt(g.dataTransfer.getData("text/plain")),O=A(g);u!==O&&s.reorderTodos(u,O)},N=(g,u)=>{g!==u&&s.reorderTodos(g,u)},A=g=>{const u=document.querySelectorAll(".todo-item"),O=g.clientY;for(let v=0;v<u.length;v++){const K=u[v].getBoundingClientRect(),te=K.top+K.height/2;if(O<te)return v}return u.length-1},I=g=>{s.setFilter(g)},F=()=>{i.value=null,a.value=!0},ee=g=>{$.value=g,m.value=!0},j=(g,u=!1)=>{if(!g)return"";const O=new Date(g);return u?O.toLocaleString("zh-CN"):O.toLocaleDateString("zh-CN")},be=g=>{switch(g){case"high":return"高优先级";case"medium":return"中优先级";case"low":return"低优先级";default:return"未设置"}};return(g,u)=>{var O;return d(),r("div",null,[b(Ve,{title:"Todo Today"}),t("div",{class:C(["todo-page-container",{"sidebar-open":k.value}])},[k.value?(d(),r("div",{key:0,class:"sidebar-overlay",onClick:u[0]||(u[0]=v=>k.value=!1)})):M("",!0),b(z,{class:"sidebar-fab",onClick:u[1]||(u[1]=v=>k.value=!k.value)},{default:T(()=>[Zt]),_:1}),t("div",ea,[b(z,{onClick:F,type:"primary",block:"",icon:"fas fa-plus",class:"add-task-btn"},{default:T(()=>[L(" 添加新待办 ")]),_:1}),t("nav",ta,[t("ul",aa,[t("li",{class:C(["nav-item",{active:w.value==="all"}]),onClick:u[2]||(u[2]=v=>I("all"))},la,2),t("li",{class:C(["nav-item",{active:w.value==="today"}]),onClick:u[3]||(u[3]=v=>I("today"))},da,2),t("li",{class:C(["nav-item",{active:w.value==="upcoming"}]),onClick:u[4]||(u[4]=v=>I("upcoming"))},ua,2),t("li",{class:C(["nav-item",{active:w.value==="past"}]),onClick:u[5]||(u[5]=v=>I("past"))},ha,2),t("li",{class:C(["nav-item",{active:w.value==="completed"}]),onClick:u[6]||(u[6]=v=>I("completed"))},ma,2)])]),t("nav",ga,[t("div",ba,[_a,b(z,{icon:"fas fa-cog",text:"",circle:"",size:"small",onClick:u[7]||(u[7]=v=>o.value=!0)})]),t("ul",ka,[H.value.length===0?(d(),r("li",$a,[L(" 点击 "),Da,L(" 管理分类 ")])):M("",!0),(d(!0),r(q,null,P(H.value,v=>(d(),r("li",{key:v,class:C(["nav-item",{active:w.value===v}]),onClick:K=>I(v)},[Sa,t("span",null,h(v),1)],10,wa))),128))])])]),t("main",Ta,[Ca,t("h1",xa,h(le.value),1),p.value.length===0?(d(),he(jt,{key:0,filter:w.value,onAddNew:F},null,8,["filter"])):(d(),r("div",{key:1,class:"todo-list",onDragover:u[8]||(u[8]=E(()=>{},["prevent"])),onDrop:V},[b(Te,{name:"todo-list"},{default:T(()=>[(d(!0),r(q,null,P(p.value,(v,K)=>(d(),he(je,{key:v.id,todo:v,index:K,onToggle:te=>ie(v.id),onEdit:te=>X(v),onDelete:te=>W(v.id),onDrag:N,onView:ee},null,8,["todo","index","onToggle","onEdit","onDelete"]))),128))]),_:1})],32)),l.value>0&&w.value==="completed"?(d(),r("div",Va,[b(z,{onClick:Z,type:"danger",text:"",icon:"fas fa-trash-alt"},{default:T(()=>[L(" 清除所有已完成任务 ")]),_:1})])):M("",!0)]),t("div",Ia,[t("div",Ma,[La,t("div",Ba,[b(Xt,{percentage:U.value,size:140,"stroke-width":12},null,8,["percentage"])]),t("div",Fa,[t("div",za,[Ea,t("span",Na,h(_.value),1)]),t("div",Oa,[Ha,t("span",Ya,h(l.value),1)]),t("div",Ua,[Aa,t("span",ja,h(_.value-l.value),1)])])])])],2),b(ae,{visible:a.value,"onUpdate:visible":u[9]||(u[9]=v=>a.value=v),width:"600px","hide-header":!0},{footer:T(()=>[t("div",Ka,[b(z,{type:"default",onClick:R},{default:T(()=>[L("取消")]),_:1}),b(z,{type:"primary","native-type":"submit",form:"todo-form"},{default:T(()=>[L(h(i.value?"更新":"添加"),1)]),_:1})])]),default:T(()=>[b(Nt,{todo:i.value,"hide-actions":!0,onCancel:R,onAdd:Q,onUpdate:ne},null,8,["todo"])]),_:1},8,["visible"]),b(ae,{visible:o.value,"onUpdate:visible":u[11]||(u[11]=v=>o.value=v),title:"管理分类",width:"500px"},{default:T(()=>[t("div",qa,[t("div",Pa,[t("div",Ra,[b(re,{modelValue:n.value,"onUpdate:modelValue":u[10]||(u[10]=v=>n.value=v),placeholder:"输入新分类名称...",onKeyup:xe(c,["enter"])},null,8,["modelValue"])]),b(z,{onClick:c,type:"primary"},{default:T(()=>[L("添加")]),_:1})]),t("div",Wa,[H.value.length>0?(d(),r("ul",Ja,[(d(!0),r(q,null,P(H.value,v=>(d(),r("li",{key:v,class:"category-item"},[t("span",null,h(v),1),b(z,{onClick:K=>B(v),icon:"fas fa-times",text:"",circle:"",size:"small"},null,8,["onClick"])]))),128))])):(d(),r("div",Ga,Xa))])])]),_:1},8,["visible"]),b(ae,{visible:y.value,"onUpdate:visible":u[13]||(u[13]=v=>y.value=v),title:"确认删除",width:"400px"},{footer:T(()=>[b(z,{type:"default",onClick:u[12]||(u[12]=v=>y.value=!1)},{default:T(()=>[L("取消")]),_:1}),b(z,{type:"danger",style:{"margin-left":"10px"},onClick:de},{default:T(()=>[L("删除")]),_:1})]),default:T(()=>[Za]),_:1},8,["visible"]),b(ae,{visible:m.value,"onUpdate:visible":u[15]||(u[15]=v=>m.value=v),title:((O=$.value)==null?void 0:O.title)||"查看详情",width:"600px"},{footer:T(()=>[b(z,{type:"primary",onClick:u[14]||(u[14]=v=>m.value=!1)},{default:T(()=>[L("关闭")]),_:1})]),default:T(()=>[$.value?(d(),r("div",eo,[t("div",to,[ao,t("p",oo,h($.value.description||"无"),1)]),t("div",so,[lo,t("span",no,h($.value.category),1)]),t("div",io,[ro,t("span",co,h(be($.value.priority)),1)]),t("div",uo,[vo,t("span",fo,h($.value.dueDate?j($.value.dueDate):"未设置"),1)]),t("div",ho,[po,t("span",{class:C(["detail-value",$.value.completed?"status-completed":"status-pending"])},h($.value.completed?"已完成":"待处理"),3)]),t("div",yo,[mo,t("span",go,h(j($.value.createdAt,!0)),1)])])):M("",!0)]),_:1},8,["visible","title"])])}}},Do=Y(bo,[["__scopeId","data-v-0fa67b1a"]]);export{Do as default};
